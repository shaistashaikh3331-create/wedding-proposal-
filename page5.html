<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Marriage Certificate</title>
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Dancing+Script&display=swap" rel="stylesheet">
<style>
body {
    margin: 0;
    padding: 0;
    background: #330000; /* dark red */
    font-family: 'Cinzel', serif;
    overflow-y: auto;
    position: relative;
}

/* Floating hearts & emojis */
@keyframes floatItems {
    0% { transform: translateY(100vh) scale(0.5); opacity: 0; }
    50% { opacity: 1; }
    100% { transform: translateY(-10vh) scale(1); opacity: 0; }
}
.float-item {
    position: absolute;
    font-size: 20px;
    animation: floatItems linear infinite;
    user-select: none;
}
.float1 { color: #ff99cc; left: 10%; animation-duration: 12s; }
.float2 { color: #ffcc66; left: 25%; animation-duration: 15s; }
.float3 { color: #ff66aa; left: 40%; animation-duration: 10s; }
.float4 { color: #ff99cc; left: 60%; animation-duration: 18s; }
.float5 { color: #ffcc66; left: 75%; animation-duration: 14s; }
.float6 { color: #ff66aa; left: 90%; animation-duration: 16s; }
.float7 { color: #ff6699; left: 15%; animation-duration: 13s; }
.float8 { color: #ff33cc; left: 35%; animation-duration: 17s; }
.float9 { color: #ff99ff; left: 55%; animation-duration: 11s; }
.float10 { color: #ff3366; left: 80%; animation-duration: 16s; }

/* Certificate container */
.certificate-container {
    width: 850px;
    max-width: 90%;
    margin: 50px auto;
    position: relative;
    background: #fff0f5; /* soft pink paper */
    border: 15px solid #ffb6c1; /* soft floral border */
    border-radius: 25px;
    padding: 50px 40px 120px 40px; /* extra bottom padding for signatures & seal */
    box-shadow: 0 0 35px rgba(0,0,0,0.5);
}

/* Certificate text styling */
h1 { 
    text-align: center; 
    font-family: 'Cinzel', serif; 
    font-size: 48px; 
    margin-bottom: 40px;
    color: #b30059;
}
label {
    font-weight: bold;
    display: block;
    margin: 10px 0 5px;
    font-size: 20px;
    color: #330000;
}
input, textarea {
    font-family: 'Dancing Script', cursive;
    font-size: 22px;
    width: 100%;
    padding: 8px 10px;
    margin-bottom: 15px;
    border: 2px solid #ff99cc;
    border-radius: 8px;
    background: #fff0f5;
    color: #330000;
    outline: none;
}
textarea { height: 80px; resize: none; }

/* Signature boxes updated to canvas */
.signature-boxes {
    display: flex;
    justify-content: space-between;
    margin-top: 40px;
}
.signature-box {
    width: 45%;
    text-align: center;
}
.signature-canvas {
    border: 2px solid #330000;
    border-radius: 8px;
    width: 100%;
    height: 100px;
    background: #fff0f5;
    touch-action: none; /* allow finger drawing */
}

/* Golden seal below signatures */
.seal {
    position: absolute;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%);
    width: 100px;
    height: 100px;
    background: radial-gradient(circle at center, #ffd700 0%, #e6c200 100%);
    border-radius: 50%;
    box-shadow: 0 0 15px rgba(255,215,0,0.7);
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'Cinzel', serif;
    font-weight: bold;
    font-size: 16px;
    color: #330000;
    text-align: center;
    padding: 10px;
}

/* Buttons */
.buttons {
    text-align: center;
    margin-top: 20px;
}
button {
    padding: 12px 25px;
    border: none;
    border-radius: 8px;
    background: #ff99cc;
    color: #330000;
    font-size: 16px;
    cursor: pointer;
    margin: 10px;
}
button:hover { transform: scale(1.05); }

</style>
</head>
<body>

<!-- Floating hearts and emojis -->
<div class="float-item float1">‚ù§</div>
<div class="float-item float2">üíõ</div>
<div class="float-item float3">üíñ</div>
<div class="float-item float4">üíó</div>
<div class="float-item float5">üíõ</div>
<div class="float-item float6">üíñ</div>
<div class="float-item float7">üíû</div>
<div class="float-item float8">üíù</div>
<div class="float-item float9">üíï</div>
<div class="float-item float10">‚ù£</div>

<div class="certificate-container" id="certificate">
    <h1>Certificate of Marriage</h1>
    
    <label for="partner1">Partner 1 Name</label>
    <input type="text" id="partner1" placeholder="Enter Name">
    
    <label for="partner2">Partner 2 Name</label>
    <input type="text" id="partner2" placeholder="Enter Name">
    
    <label for="birthday1">Partner 1 Birthdate</label>
    <input type="text" id="birthday1" placeholder="DD/MM/YYYY">
    
    <label for="birthday2">Partner 2 Birthdate</label>
    <input type="text" id="birthday2" placeholder="DD/MM/YYYY">
    
    <label for="marriageDate">Marriage Date</label>
    <input type="text" id="marriageDate" placeholder="DD/MM/YYYY">
    
    <label for="legalStatement">Legal Statement</label>
    <textarea id="legalStatement" placeholder="Enter legal declaration"></textarea>
    
    <div class="signature-boxes">
        <div class="signature-box">
            <label>Partner 1 Signature</label>
            <canvas id="signature1" class="signature-canvas"></canvas>
        </div>
        <div class="signature-box">
            <label>Partner 2 Signature</label>
            <canvas id="signature2" class="signature-canvas"></canvas>
        </div>
    </div>

    <div class="seal">Official Seal</div>
</div>

<div class="buttons">
    <button onclick="downloadCertificate()">Download Certificate</button>
    <button onclick="nextPage()">Next ‚û°</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>

// Page navigation
function nextPage() {
    window.location.href = 'page6.html';
}

// Mobile-proof PDF download
function downloadCertificate() {
    const certificate = document.getElementById('certificate');
    html2canvas(certificate, { scale: 2 }).then(canvas => { // higher resolution
        const imgData = canvas.toDataURL('image/png');
        const { jsPDF } = window.jspdf;
        const pdf = new jsPDF('portrait', 'pt', [canvas.width, canvas.height]);
        pdf.addImage(imgData, 'PNG', 0, 0, canvas.width, canvas.height);

        // Works on mobile like Chrome download
        pdf.save('Marriage_Certificate.pdf');
    });
}

// Enable drawing on signature canvases
function enableSignature(canvasId) {
    const canvas = document.getElementById(canvasId);
    const ctx = canvas.getContext('2d');
    let drawing = false;

    function startPosition(e) {
        drawing = true;
        draw(e);
    }
    function finishedPosition() {
        drawing = false;
        ctx.beginPath();
    }
    function draw(e) {
        if(!drawing) return;
        e.preventDefault();
        const rect = canvas.getBoundingClientRect();
        let x, y;
        if(e.touches){
            x = e.touches[0].clientX - rect.left;
            y = e.touches[0].clientY - rect.top;
        } else {
            x = e.clientX - rect.left;
            y = e.clientY - rect.top;
        }
        ctx.lineWidth = 2;
        ctx.lineCap = "round";
        ctx.strokeStyle = "#330000";
        ctx.lineTo(x, y);
        ctx.stroke();
        ctx.beginPath();
        ctx.moveTo(x, y);
    }

    // Mouse events
    canvas.addEventListener('mousedown', startPosition);
    canvas.addEventListener('mouseup', finishedPosition);
    canvas.addEventListener('mousemove', draw);

    // Touch events
    canvas.addEventListener('touchstart', startPosition);
    canvas.addEventListener('touchend', finishedPosition);
    canvas.addEventListener('touchmove', draw);
}

// Activate signature drawing
enableSignature('signature1');
enableSignature('signature2');

</script>
</body>
</html>